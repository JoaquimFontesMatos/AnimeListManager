<main [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}" class="main">
  <nav [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
    class="navbar navbar-expand-md navbar-light bg-body-tertiary">
    <div [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
      class="container-fluid">
      <span [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
        class="navbar-brand">Anime List</span>
      <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
        class="navbar-toggler" type="button" aria-controls="navbarContent" aria-label="Toggle navigation">
      </button>

      <div [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
        class="navbar-collapse" id="navbarContent">
        <ul [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
          class="navbar-nav me-auto mb-2 mb-lg-0">
          <li [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
            class="nav-item" ngbDropdown display="dynamic" placement="bottom-end">
            <a [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
              class="nav-link" tabindex="0" ngbDropdownToggle id="navbarDropdown1" role="button"> Filter By Status
            </a>
            <div [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
              ngbDropdownMenu aria-labelledby="navbarDropdown3" class="dropdown-menu">
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('All')">All</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('To Watch')">To Watch</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('Watching')">Watching</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('Seen')">Seen</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('Dropped')">Dropped</button>
            </div>
          </li>
          <li [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
            class="nav-item" ngbDropdown display="dynamic" placement="bottom-end">
            <a [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
              class="nav-link" routerLink="/create-anime" routerLinkActive="active" ariaCurrentWhenActive="page">Create
              Anime</a>
          </li>
        </ul>
        <form class="d-flex" role="search" [formGroup]="searchForm" (click)="search()">
          <input class="form-control me-2" formControlName="name" type="text" name="search" placeholder="title"
            id="search_bar">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <div [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
    class="formContainer"> <router-outlet></router-outlet>
  </div>

  <div [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
    class="container">
    <h2>My List</h2>
    <h5>Anime Count: {{animes.length}} | Total Episodes Watched: {{totalEp}}</h5>
    <div class="btn-group" role="group" aria-label="Basic example">
      <button type="button" class="select_view btn btn-primary" ngbDropdownItem (click)="galeryView()"><svg
          xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-border-all"
          viewBox="0 0 16 16">
          <path d="M0 0h16v16H0zm1 1v6.5h6.5V1zm7.5 0v6.5H15V1zM15 8.5H8.5V15H15zM7.5 15V8.5H1V15z" />
        </svg> Galery</button>
      <button type="button" class="select_view btn btn-primary" ngbDropdownItem (click)="tableView()"><svg
          xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-table"
          viewBox="0 0 16 16">
          <path
            d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 2h-4v3h4zm0 4h-4v3h4zm0 4h-4v3h3a1 1 0 0 0 1-1zm-5 3v-3H6v3zm-5 0v-3H1v2a1 1 0 0 0 1 1zm-4-4h4V8H1zm0-4h4V4H1zm5-3v3h4V4zm4 4H6v3h4z" />
        </svg> Table</button>
      <button type="button" class="select_view btn btn-primary" ngbDropdownItem (click)="apiService.setDarkMode()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-moon-fill" viewBox="0 0 16 16">
        <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"/>
      </svg>Dark Mode</button>
      <button type="button" class="select_view btn btn-primary" ngbDropdownItem (click)="apiService.setLighMode()"><svg
          xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sun-fill"
          viewBox="0 0 16 16">
          <path
            d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708" />
        </svg> Light Mode</button>
    </div>

    <div *ngIf="presentation=='galery'" class="galery">
      <div *ngFor="let anime of animes;index as i" class="card" style="width: 12rem;">
        <img src="{{anime.image}}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title">{{anime.name}}</h5>
          <p class="card-text" [ngStyle]="{'color': getColor(anime.status)}">Status: {{anime.status}}</p>
          <p class="card-text">Ep: {{anime.episode}}</p>
          <a class="card-link" routerLink="/update-anime/{{anime._id}}" routerLinkActive="active"
            ariaCurrentWhenActive="page">Update</a>
          <a class="card-link" routerLink="/delete-anime/{{anime._id}}" routerLinkActive="active"
            ariaCurrentWhenActive="page">Delete</a>
        </div>
      </div>
    </div>

    <table [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
      *ngIf="presentation=='table'" class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Title</th>
          <th class="nav-item" ngbDropdown display="dynamic" placement="bottom-end">
            <a class="nav-link" tabindex="0" ngbDropdownToggle id="navbarDropdown1" role="button"> Filter By Status
            </a>
            <div [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
              ngbDropdownMenu aria-labelledby="navbarDropdown3" class="dropdown-menu">
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('All')">All</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('To Watch')">To Watch</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('Watching')">Watching</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('Seen')">Seen</button>
              <button [ngClass]="{'dark-mode bg-dark text-light': apiService.isDarkMode(), 'light-mode bg-light text-dark': !apiService.isDarkMode()}"
                ngbDropdownItem (click)="getByStatus('Dropped')">Dropped</button>
            </div>
          </th>
          <th scope="col">Episode</th>
          <th scope="col">Update/Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let anime of animes;index as i">
          <th scope="row">{{i}}</th>
          <td>{{anime.name}}</td>
          <td [ngStyle]="{'color': getColor(anime.status)}">{{anime.status}}</td>
          <td>{{anime.episode}}</td>
          <td><a routerLink="/update-anime/{{anime._id}}" routerLinkActive="active" ariaCurrentWhenActive="page">Update
            </a>
            <span>/</span>
            <a routerLink="/delete-anime/{{anime._id}}" routerLinkActive="active" ariaCurrentWhenActive="page">
              Delete</a>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="animes.length==0">
      <h5 style="text-align: center;">There's no Animes here you weak fuck!!!!</h5>
    </div>
  </div>
</main>